---
title: "개선 일기 - react-hook-form 을 일관성 있게"
subtitle: "일관성 그리고 예측 가능한 코드"
date: "2024-09-21"
thumbnailUrl: "/images/improvementForm/thumbnail.png"
tag: "react-hook-form,zod"
description: "Write consistent, predictable code"
postingType: "post"
---

> `개선 일기` 는 다음과 같은 주제를 다루고 있어요.
>
> 1. 개선 전 불편한 점
> 2. 개선을 위해 찾아낸 방법
> 3. 개선 후기

## 요약

> react-hook-form 을 사용하다보면 비슷한 목적의 코드가 다양한 형태로 이루어질 수 있다는 걸 느꼈습니다.<br />
> 이로 인해 유지보수에 어려움을 느껴 2가지의 큰 골조를 토대로 개선해보았습니다.<br />
>
> - 일관성 있는 코드로 예측 가능한 코드 만들기<br />
> - form 과 관련된 코드의 응집도 높이기<br />
>
> 개발하다보면 자주 듣는 `일관성 있는 코드`, `코드 응집도` 의 중요성을 다시금 체감하는 시간이였습니다.

## 라이브러리 버전

- react-hook-form: v7.53.0
- zod: v3.23.8

## 개선하기 전에 어떤게 불편했나요?

저희 팀에서는 로그인 페이지, 회원가입과 같은 Form 을 핸들링할 때, [react-hook-form](https://react-hook-form.com/) 라이브러리를 사용하고 있습니다.<br />
react-hook-form 과 [zod](https://zod.dev/) 를 함께 사용해서 Form 데이터 관리 및 검증을 하고 있습니다.<br />

다만, react-hook-form 을 사용하면서 `비슷한 목적의 코드가 약간씩 다른 형태로 작성된 것`을 확인할 수 있었습니다.<br />
이로 인해 특정 Form 데이터 로직을 수정할 때, 관련된 컴포넌트를 모두 체크해야했고<br />
어떻게 Form 데이터를 다루는지 파악하는 비용이 매번 발생했습니다.

저는 이와 같은 과정 자체가 불편하다고 생각했습니다.

### 불편하다고 생각한 이유

Form 관련 코드를 수정할 때 관련된 코드를 모두 확인해야한다는 것<br />
이 비용이 꽤 크다고 느꼈습니다.<br />

Admin 과 같은 다양하고 복잡한 설정을 다루는 환경에서 그 비용을 크게 느꼈습니다.<br />
`A 라는 필드를 수정했을 때, B 라는 설정값이 변경될 수 있다.`<br />
Form 을 다루면서 위와 같은 조건이 많았습니다.

react-hook-form 의 코드가 서로 달라 이러한 조건을 다루는 방식도 달랐고<br />
`놓치는 조건이 없을까` 하는 걱정에 코드를 하나하나 들여다보게 되었습니다.

정리하자면, 불편하다고 느낀 부분은 아래 두 가지로 보여집니다.

> 1. 약간씩 다른 Form 데이터 형태
> 2. Form 데이터 관리 로직의 분산
